server:
  port: 8090
spring:
  application:
    name: CursoArquitecturaHexagonal-Gateway
  cloud:
    gateway:
      mvc:
        routes:
          - id: CursoArquitecturaHexagonal
            uri: http://localhost:8086/students
            predicates:
              - Path=/api/students/**
            filters:
              # http://localhost:8090/api/students -> http://localhost:8080/students
              - StripPrefix=1
          - id: courses-service
            uri: http://localhost:8097/courses
            predicates:
              - Path=/api/courses/**
            filters:
              # http://localhost:8090/api/students -> http://localhost:8080/students
              - StripPrefix=1ty
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${AUTH_SERVER:http://localhost:9010}
          jwk-set-uri: ${AUTH_SERVER:http://localhost:9010}/oauth2/jwks
      client:
        registration:
          CursoArquitecturaHexagonal-Gateway:
            provider: spring
            client-id: CursoArquitecturaHexagonal-Gateway
            client-secret: 12345
            authorization-grant-type: authorization_code
            redirect-uri: ${REDIRECT_URL:http://localhost:8090/authorized}
            scope:
              - openid
              - profile
              - red
              - write
            client-name: CursoArquitecturaHexagonal-Gateway
        provider:
          spring:
            issuer-uri: ${AUTH_SERVER:http://localhost:9010}
